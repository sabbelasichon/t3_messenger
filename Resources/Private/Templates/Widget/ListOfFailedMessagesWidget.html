<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Widget/Widget" />
<f:section name="main">
    <f:if condition="{failedMessages}">
        <f:then>
            <div id="list-of-failed-messages-widget" class="widget-table-wrapper">
                <table class="widget-table">
                    <thead>
                    <tr>
                        <th><span>Id</th>
                        <th><span><f:translate key="widgets.failedMessages.widget.header.message" extensionName="T3Messenger" /></span></th>
                        <th><span><f:translate key="widgets.failedMessages.widget.header.error_message" extensionName="T3Messenger" /></span></th>
                        <th><span><f:translate key="widgets.failedMessages.widget.header.redelivered" extensionName="T3Messenger" /></span></th>
                        <th><span><f:translate key="widgets.failedMessages.widget.header.retry_count" extensionName="T3Messenger" /></span></th>
                    </tr>
                    </thead>
                    <tbody>
                    <f:for each="{failedMessages}" as="failedMessage">
                        <tr>
                            <td>
                                {failedMessage.messageId}
                            </td>
                            <td>
                                <span title="{failedMessage.message}">
                                    <f:format.crop maxCharacters="40" append="...">{failedMessage.message}</f:format.crop>
                                </span>
                            </td>
                            <td>
                                <strong>{failedMessage.errorMessage}</strong>
                            </td>
                            <td>
                                {failedMessage.redelivered -> f:format.date(format: 'd.m.Y - H:i:s')}
                            </td>
                            <td>
                                {failedMessage.retryCount}
                            </td>
                        </tr>
                    </f:for>
                    </tbody>
                </table>
            </div>
        </f:then>
        <f:else>
            <div class="row widget-no-items-found">
                <div class="col-xs-12">
                    <p>
                        <f:translate key="widgets.failedMessages.widget.no_messages_found" extensionName="T3Messenger" />
                    </p>
                </div>
            </div>
        </f:else>
    </f:if>
</f:section>
</html>
